# PS1スタイルテクスチャジェネレーター 要件定義書

## 1. はじめに

### 1.1 概要
本アプリケーションは、通常の画像をPlayStation 1（PS1）のようなレトロゲーム風のテクスチャに変換するデスクトップアプリケーションです。画像の解像度を下げ、色数を制限することで、1990年代のゲーム機特有の視覚的な質感を再現します。

### 1.2 背景
レトロゲームの視覚的スタイルは、現代のゲーム開発やアート制作において人気があります。本アプリケーションは、このようなスタイルを簡単に実現するためのツールを提供します。

### 1.3 主要機能
- 画像のピクセレート処理
- ディザリングを含む色数削減
- 3Dプレビュー機能（立方体への自動テクスチャ適用）
- リアルタイムプレビュー（2D/3D同時表示）

## 2. 機能要件

### 2.1 画像入力機能

**ユーザーストーリー**: クリエイターとして、画像を簡単にアプリケーションに取り込みたい、効率的に作業を進めるために。

**受け入れ条件**:
- WHEN ユーザーが画像ファイルをドラッグ&ドロップする THEN アプリケーションは画像を読み込む
- WHEN ユーザーがファイル選択ダイアログから画像を選択する THEN アプリケーションは画像を読み込む
- IF 非対応形式のファイルが入力された THEN エラーメッセージを表示する

### 2.2 画像変換機能

**ユーザーストーリー**: クリエイターとして、画像をPS1風のテクスチャに変換したい、レトロゲームの雰囲気を再現するために。

**受け入れ条件**:
- WHEN ユーザーが長辺のピクセル数を指定する（32-512） THEN 画像がその解像度にリサイズされる
- WHEN ユーザーが色数を指定する（4-256） THEN 画像の色数が削減される
- WHEN 色数削減が実行される THEN ディザリング処理が適用される
- WHEN パラメータが変更される THEN リアルタイムでプレビューが更新される

### 2.3 プレビュー機能

**ユーザーストーリー**: クリエイターとして、変換前後の画像を比較したい、適切な設定を見つけるために。

**受け入れ条件**:
- WHEN 画像が読み込まれる THEN 変換後画像が表示される
- WHEN パラメータが変更される THEN 変換後画像がリアルタイムで更新される

### 2.4 3Dプレビュー機能

**ユーザーストーリー**: クリエイターとして、テクスチャを3Dオブジェクトに適用した状態を確認したい、ゲーム内での見え方を想像するために。

**受け入れ条件**:
- WHEN 画像が変換される THEN 立方体に変換後のテクスチャが自動的に適用される
- WHEN ユーザーがマウスで操作する THEN カメラのズーム・回転（OrbitControls）ができる
- WHEN テクスチャが更新される THEN 3Dプレビューもリアルタイムで更新される
- IF 3Dプレビューの初期化に失敗した THEN エラーメッセージを表示し、2Dプレビューのみを表示する

### 2.5 保存機能

**ユーザーストーリー**: クリエイターとして、変換した画像を保存したい、後で使用するために。

**受け入れ条件**:
- WHEN ユーザーが保存ボタンをクリックする THEN OSの保存ダイアログが表示される
- WHEN 保存先が選択される THEN 画像がPNG形式で保存される
- WHEN ファイル名が生成される THEN 元のファイル名に_長辺px数_色数サフィックスが追加される（例：original_256_16.png）
- IF 保存に失敗した THEN エラーメッセージを表示する

## 3. 非機能要件

### 3.1 パフォーマンス要件
- 画像処理は非同期で実行され、UIがブロックされない SHALL
- 単一画像の処理は2秒以内に完了する SHOULD

### 3.2 ユーザビリティ要件
- インターフェースは直感的で、説明なしで使用できる SHOULD
- すべての操作に対して視覚的なフィードバックを提供する SHALL
- エラーメッセージは具体的で、解決方法を示す SHOULD
- 単一画面ですべての機能にアクセスできる SHALL

### 3.3 互換性要件
- macOS 10.15以降で動作する SHALL
- Retinaディスプレイに対応する SHOULD

### 3.4 技術要件
- Electron、React、TypeScriptを使用して開発する SHALL
- Three.jsを使用して3Dプレビューを実装する SHALL
- コードは型安全性を保つためTypeScriptで記述する SHALL

## 4. 制約事項
- macOS専用アプリケーションとして開発
- PNG形式のみの出力サポート
- 処理速度よりも品質を優先