# PS1スタイルテクスチャジェネレーター 実装タスクリスト

## 概要
本タスクリストは、PS1スタイルテクスチャジェネレーターの実装に必要な作業を定義します。各タスクは独立して実行可能な単位で構成され、コーディングエージェントが効率的に実装できるよう設計されています。

## タスクリスト

### インフラストラクチャとセットアップ

- [x] 1. Electronプロジェクトの初期セットアップ
  - Electron + React + TypeScript + Viteの基本構成作成
  - package.jsonの設定
  - tsconfig.jsonの設定
  - Electron Builder設定
  - 開発用スクリプトの設定
  - lint、型チェック、ビルドの実行
  - _要件: 3.4技術要件_

- [x] 2. プロジェクトディレクトリ構造の作成
  - src/main、src/renderer、src/shared、src/assetsディレクトリ作成
  - 各ディレクトリにindex.tsファイル配置
  - CSS変数とグローバルスタイルの初期設定 (src/renderer/styles)
  - レトロターミナル風デザインの基本CSS定義
  - lint実行
  - _要件: 3.4技術要件_

- [x] 3. Electronメインプロセスの実装
  - src/main/index.tsの実装
  - BrowserWindow設定（macOS対応）
  - アプリケーションメニューの基本構成 (src/main/menu.ts)
  - 開発環境とプロダクション環境の分岐処理
  - lint、型チェック実行
  - _要件: 3.3互換性要件_

### コアロジック実装（TDD）

- [ ] 4. 画像リサイズロジック - TDD実装
  - src/renderer/core/pixelation/にテストファイル作成
  - 長辺基準のリサイズテストケース定義
  - アスペクト比維持のテストケース
  - テスト実行でRED状態確認
  - ImageResizer実装でGREEN達成
  - リファクタリングとGREEN維持
  - lint、型チェック実行
  - _要件: 2.2画像変換機能_

- [ ] 5. ディザリング処理ロジック - TDD実装
  - src/renderer/core/dithering/にテストファイル作成
  - Floyd-Steinbergディザリングのテストケース定義
  - エッジケース（単色画像、グラデーション）のテスト
  - テスト実行でRED状態確認
  - DitheringProcessor実装でGREEN達成
  - パフォーマンス最適化とGREEN維持
  - lint、型チェック実行
  - _要件: 2.2画像変換機能_

- [ ] 6. 色数削減ロジック - TDD実装
  - src/renderer/core/colorReduction/にテストファイル作成
  - 色数削減（4-256色）のテストケース定義
  - カラーパレット生成のテスト
  - テスト実行でRED状態確認
  - ColorReducer実装でGREEN達成
  - 最適化とGREEN維持
  - lint、型チェック実行
  - _要件: 2.2画像変換機能_

### サービス層実装

- [ ] 7. Web Worker実装
  - src/renderer/workers/imageProcessing.worker.ts作成
  - 画像処理パイプラインの実装
  - メインスレッドとの通信プロトコル定義
  - エラーハンドリング実装
  - パフォーマンステスト実施
  - lint、型チェック実行
  - _要件: 3.1パフォーマンス要件_

- [ ] 8. 画像処理サービスの実装
  - src/renderer/services/imageProcessor.ts作成
  - Web Workerとの連携実装
  - 非同期処理の管理
  - プログレス通知機能
  - エラーハンドリング
  - lint、型チェック、テスト実行
  - _要件: 2.2画像変換機能, 3.1パフォーマンス要件_

- [ ] 9. ファイルサービスの実装
  - src/renderer/services/fileService.ts作成
  - Electron IPCを使用したファイル操作
  - 画像ファイルの読み込み機能
  - PNG形式での保存機能
  - ファイル名生成ロジック（_長辺px数_色数サフィックス）
  - lint、型チェック、テスト実行
  - _要件: 2.1画像入力機能, 2.5保存機能_

### UIコンポーネント実装

- [ ] 10. ルートコンポーネントと状態管理の実装
  - src/renderer/App.tsx作成
  - React Context APIによる状態管理設定
  - useReducerによるアプリケーション状態管理
  - レトロターミナル風レイアウト実装
  - lint、型チェック実行
  - 手動テストの実施依頼
  - _要件: 3.2ユーザビリティ要件_

- [ ] 11. 画像入力コンポーネントの実装
  - src/renderer/components/ImageInput/作成
  - ドラッグ&ドロップ機能実装
  - ファイル選択ダイアログ連携
  - ファイル形式バリデーション
  - エラーメッセージ表示
  - lint、型チェック実行
  - 手動テストの実施依頼
  - _要件: 2.1画像入力機能_

- [ ] 12. パラメータコントロールコンポーネントの実装
  - src/renderer/components/ParameterControls/作成
  - 長辺ピクセル数スライダー（32-512）
  - 色数選択スライダー（4-256）
  - リアルタイム値表示
  - レトロターミナル風スタイル適用
  - lint、型チェック実行
  - 手動テストの実施依頼
  - _要件: 2.2画像変換機能_

- [ ] 13. 2D画像プレビューコンポーネントの実装
  - src/renderer/components/ImagePreview/作成
  - 変換後画像の表示
  - リアルタイム更新機能
  - ローディング状態表示
  - エラー状態の処理
  - lint、型チェック実行
  - 手動テストの実施依頼
  - _要件: 2.3プレビュー機能_

- [ ] 14. 3Dプレビューコンポーネントの実装
  - src/renderer/components/Preview3D/作成
  - Three.jsシーン初期化
  - 立方体メッシュ生成
  - テクスチャ適用機能
  - OrbitControlsによるカメラ操作
  - WebGLエラーハンドリング
  - lint、型チェック実行
  - 手動テストの実施依頼
  - _要件: 2.4 3Dプレビュー機能_

- [ ] 15. 保存ボタンコンポーネントの実装
  - src/renderer/components/SaveButton/作成
  - Electron IPCによる保存ダイアログ呼び出し
  - 保存処理中の状態表示
  - エラーハンドリング
  - 成功通知表示
  - lint、型チェック実行
  - 手動テストの実施依頼
  - _要件: 2.5保存機能_

### 統合とカスタムフック

- [ ] 16. 画像処理カスタムフックの実装
  - src/renderer/hooks/useImageProcessor.ts作成
  - 画像処理サービスとの連携
  - 処理状態の管理
  - エラーハンドリング
  - パラメータ変更時の自動処理
  - lint、型チェック、テスト実行
  - _要件: 2.2画像変換機能_

- [ ] 17. Three.jsシーン管理フックの実装
  - src/renderer/hooks/useThreeScene.ts作成
  - シーンのライフサイクル管理
  - テクスチャ更新機能
  - メモリリークの防止
  - リサイズ対応
  - lint、型チェック、テスト実行
  - _要件: 2.4 3Dプレビュー機能_

### ネイティブ機能統合

- [ ] 18. ファイルダイアログ機能の実装
  - src/main/dialogs/fileDialog.ts作成
  - 画像ファイル選択ダイアログ
  - ファイル形式フィルタリング
  - IPC通信設定
  - lint、型チェック実行
  - _要件: 2.1画像入力機能_

- [ ] 19. 保存ダイアログ機能の実装
  - src/main/dialogs/saveDialog.ts作成
  - ファイル保存ダイアログ
  - デフォルトファイル名設定
  - 保存処理実行
  - lint、型チェック実行
  - _要件: 2.5保存機能_

### 最終統合とテスト

- [ ] 20. アプリケーション全体の統合
  - 全コンポーネントの結合
  - データフローの確認
  - メモリリーク検証
  - パフォーマンステスト（2秒以内の処理時間確認）
  - Retinaディスプレイでの表示確認
  - 全体的なUAT実施依頼
  - _要件: 3.1パフォーマンス要件, 3.3互換性要件_

- [ ] 21. エラーハンドリングとユーザビリティの改善
  - エラーメッセージの改善
  - ツールチップの追加
  - キーボードショートカット実装
  - アクセシビリティ確認
  - 最終的なUAT実施依頼
  - _要件: 3.2ユーザビリティ要件_

- [ ] 22. ビルドとパッケージング
  - プロダクションビルド設定
  - macOS用.dmgファイル生成
  - コード署名設定（必要な場合）
  - 最終動作確認
  - リリースノート作成
  - _要件: 3.3互換性要件_

## 実装の優先順位
1. インフラストラクチャとセットアップ（タスク1-3）
2. コアロジック実装（タスク4-6）
3. サービス層実装（タスク7-9）
4. UIコンポーネント実装（タスク10-15）
5. 統合とカスタムフック（タスク16-17）
6. ネイティブ機能統合（タスク18-19）
7. 最終統合とテスト（タスク20-22）

各タスクは依存関係を考慮して順次実装することで、効率的な開発が可能です。